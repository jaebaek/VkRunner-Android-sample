#ifndef COMPUTE_STRUCTURE_SHADER_TEST_H
#define COMPUTE_STRUCTURE_SHADER_TEST_H
"app/vkrunner_scripts/compute_structure.shader_test",
R"(
[comment]
Source code in OpenCL C:


typedef struct {
  float a, b, c, d;
} S;

float4 FromS(S in) {
  return (float4)(in.a, in.b, in.c, in.d);
}

S ToS(float4 in) {
  S val = {in.x, in.y, in.z, in.w};
  return val;
}

kernel void foo(global S* out, global float4* in) {
  uint i = get_global_id(0);
  out[i] = ToS(in[i]);
}


The following SPIR-V code was generated by compiling the above code with CLSPV

[compute shader binary]
7230203 10200 70000 42 0 20011 1 20011 115a b000a 5f565053 5f52484b 726f7473
5f656761 66667562 735f7265 61726f74 635f6567 7373616c 0 8000a 5f565053 5f52484b
69726176 656c6261 696f705f 7265746e 73 3000e 0 1 6000f 5 1 6e69616d 0 2 30003 3
78 40047 3 1 0 40047 4 1 1 40047 5 1 2 50048 6 0 23 0 50048 6 1 23 4 50048 6 2
23 8 50048 6 3 23 c 40047 7 6 10 50048 8 0 23 0 30047 8 2 40047 9 6 10 50048 a 0
23 0 30047 a 2 40047 2 b 1c 40047 b b 19 40047 c 22 0 40047 c 21 0 40047 d 22 0
40047 d 21 1 30016 e 20 6001e 6 e e e e 3001d 7 6 3001e 8 7 40020 f c 8 40017 10
e 4 40020 11 c 10 3001d 9 10 3001e a 9 40020 12 c a 40015 13 20 0 20013 14 30021
15 14 40017 16 13 3 40020 17 1 16 40020 18 1 13 40020 19 c e 40021 1a 6 10 40020
1b 6 16 4002b 13 1c 0 4002b 13 1d 1 4002b 13 1e 2 4002b 13 1f 3 4003b 17 2 1
40032 13 3 1 40032 13 4 1 40032 13 5 1 60033 16 b 3 4 5 5003b 1b 20 6 b 4003b f
c c 4003b 12 d c 40020 21 7 6 40020 22 7 e 50036 6 23 8 1a 30037 10 24 200f8 25
50051 e 26 24 0 50051 e 27 24 1 50051 e 28 24 2 50051 e 29 24 3 70050 6 2a 26 27
28 29 200fe 2a 10038 50036 14 1 0 15 200f8 2b 4003b 22 2c 7 4003b 22 2d 7 4003b
22 2e 7 4003b 22 2f 7 50041 18 30 2 1c 4003d 13 31 30 60041 11 32 d 1c 31 4003d
10 33 32 50051 e 34 33 0 50051 e 35 33 1 50051 e 36 33 2 50051 e 37 33 3 70050 6
38 34 35 36 37 3003e 2f 34 3003e 2e 35 3003e 2d 36 3003e 2c 37 4003d e 39 2c
4003d e 3a 2d 4003d e 3b 2e 4003d e 3c 2f 70050 6 3d 3c 3b 3a 39 70041 19 3e c
1c 31 1c 3003e 3e 3c 70041 19 3f c 1c 31 1d 3003e 3f 3b 70041 19 40 c 1c 31 1e
3003e 40 3a 70041 19 41 c 1c 31 1f 3003e 41 39 100fd 10038

[require]
VK_KHR_storage_buffer_storage_class
VK_KHR_variable_pointers

[test]
# ssbo [bind] subdata [type] [offset] [values ...]
ssbo 0 subdata vec4 0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0
ssbo 1 subdata vec4 0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0 2.0

compute 4 1 1

# probe ssbo [type] [bind] [offset] == [values ...]
probe ssbo vec4 0 0 == 2.0 2.0 2.0 2.0
probe ssbo vec4 1 0 == 2.0 2.0 2.0 2.0
probe ssbo vec4 0 4 == 2.0 2.0 2.0 2.0
probe ssbo vec4 1 4 == 2.0 2.0 2.0 2.0
probe ssbo vec4 0 8 == 2.0 2.0 2.0 2.0
probe ssbo vec4 1 8 == 2.0 2.0 2.0 2.0
probe ssbo vec4 0 12 == 2.0 2.0 2.0 2.0
probe ssbo vec4 1 12 == 2.0 2.0 2.0 2.0
)",
#endif
