#ifndef DESC_SET_AND_BINDING_SHADER_TEST_H
#define DESC_SET_AND_BINDING_SHADER_TEST_H
"app/examples/desc_set_and_binding.shader_test",
R"(
[require]
fragmentStoresAndAtomics

[vertex shader passthrough]

[fragment shader binary]
7230203 10000 80004 67 0 20011 1 6000b 1 4c534c47 6474732e 3035342e 0 3000e 0 1
6000f 4 4 6e69616d 0 55 30010 4 7 30003 2 1c2 40005 4 6e69616d 0 40005 8
636f6c62 386b 70006 8 0 32746573 6e69625f 676e6964 37 90006 8 1 32746573
6e69625f 676e6964 65725f37 746c7573 0 30005 a 0 40005 d 636f6c62 306b 70006 d 0
30746573 6e69625f 676e6964 34 90006 d 1 30746573 6e69625f 676e6964 65725f34
746c7573 0 30005 f 0 40005 15 636f6c62 316b 70006 15 0 30746573 6e69625f
676e6964 35 90006 15 1 30746573 6e69625f 676e6964 65725f35 746c7573 0 30005 17 0
40005 1b 636f6c62 326b 70006 1b 0 31746573 6e69625f 676e6964 33 90006 1b 1
31746573 6e69625f 676e6964 65725f33 746c7573 0 30005 1d 0 40005 21 636f6c62 336b
70006 21 0 31746573 6e69625f 676e6964 35 90006 21 1 31746573 6e69625f 676e6964
65725f35 746c7573 0 30005 23 0 40005 26 636f6c62 396b 80006 26 0 5f6f6275
33746573 6e69625f 676e6964 32 30005 28 0 40005 2d 636f6c62 346b 70006 2d 0
31746573 6e69625f 676e6964 36 90006 2d 1 31746573 6e69625f 676e6964 65725f36
746c7573 0 30005 2f 0 40005 33 636f6c62 356b 70006 33 0 32746573 6e69625f
676e6964 30 90006 33 1 32746573 6e69625f 676e6964 65725f30 746c7573 0 30005 35 0
40005 39 636f6c62 366b 70006 39 0 32746573 6e69625f 676e6964 33 90006 39 1
32746573 6e69625f 676e6964 65725f33 746c7573 0 30005 3b 0 40005 3e 636f6c62
30316b 80006 3e 0 5f6f6275 33746573 6e69625f 676e6964 36 30005 40 0 40005 45
636f6c62 376b 70006 45 0 32746573 6e69625f 676e6964 34 90006 45 1 32746573
6e69625f 676e6964 65725f34 746c7573 0 30005 47 0 40005 4a 636f6c62 31316b 80006
4a 0 5f6f6275 33746573 6e69625f 676e6964 3031 30005 4c 0 50005 55 6f6c6f63
756f5f72 74 40005 58 636f6c62 6b 60006 58 0 6f6c6f63 6e695f72 0 60006 58 1
61697274 656c676e 0 50006 58 2 65726874 65 30005 5a 0 50048 8 0 23 0 50048 8 1
23 10 30047 8 3 40047 a 22 2 40047 a 21 7 50048 d 0 23 0 50048 d 1 23 10 30047 d
3 40047 f 22 0 40047 f 21 4 50048 15 0 23 0 50048 15 1 23 10 30047 15 3 40047 17
22 0 40047 17 21 5 50048 1b 0 23 0 50048 1b 1 23 10 30047 1b 3 40047 1d 22 1
40047 1d 21 3 50048 21 0 23 0 50048 21 1 23 10 30047 21 3 40047 23 22 1 40047 23
21 5 50048 26 0 23 0 30047 26 2 40047 28 22 3 40047 28 21 2 50048 2d 0 23 0
50048 2d 1 23 10 30047 2d 3 40047 2f 22 1 40047 2f 21 6 50048 33 0 23 0 50048 33
1 23 10 30047 33 3 40047 35 22 2 40047 35 21 0 50048 39 0 23 0 50048 39 1 23 10
30047 39 3 40047 3b 22 2 40047 3b 21 3 50048 3e 0 23 0 30047 3e 2 40047 40 22 3
40047 40 21 6 50048 45 0 23 0 50048 45 1 23 10 30047 45 3 40047 47 22 2 40047 47
21 4 50048 4a 0 23 0 30047 4a 2 40047 4c 22 3 40047 4c 21 a 40047 55 1e 0 50048
58 0 23 0 50048 58 1 23 10 50048 58 2 23 1c 30047 58 3 40047 5a 22 0 40047 5a 21
3 20013 2 30021 3 2 30016 6 20 40017 7 6 4 4001e 8 7 7 40020 9 2 8 4003b 9 a 2
40015 b 20 1 4002b b c 1 4001e d 7 7 40020 e 2 d 4003b e f 2 4002b b 10 0 40020
11 2 7 4001e 15 7 7 40020 16 2 15 4003b 16 17 2 4001e 1b 7 7 40020 1c 2 1b 4003b
1c 1d 2 4001e 21 7 7 40020 22 2 21 4003b 22 23 2 3001e 26 7 40020 27 2 26 4003b
27 28 2 4001e 2d 7 7 40020 2e 2 2d 4003b 2e 2f 2 4001e 33 7 7 40020 34 2 33
4003b 34 35 2 4001e 39 7 7 40020 3a 2 39 4003b 3a 3b 2 3001e 3e 7 40020 3f 2 3e
4003b 3f 40 2 4001e 45 7 7 40020 46 2 45 4003b 46 47 2 3001e 4a 7 40020 4b 2 4a
4003b 4b 4c 2 40020 54 3 7 4003b 54 55 3 40017 56 6 3 40015 57 20 0 5001e 58 7
56 57 40020 59 2 58 4003b 59 5a 2 4002b b 5d 2 4002b 57 5e 3 40020 5f 2 57 4002b
6 61 40400000 4002b 6 62 40800000 4002b 6 63 40a00000 6002c 56 64 61 62 63 40020
65 2 56 50036 2 4 0 3 200f8 5 50041 11 12 f 10 4003d 7 13 12 50041 11 14 a c
3003e 14 13 50041 11 18 17 10 4003d 7 19 18 50041 11 1a f c 3003e 1a 19 50041 11
1e 1d 10 4003d 7 1f 1e 50041 11 20 17 c 3003e 20 1f 50041 11 24 23 10 4003d 7 25
24 50041 11 29 28 10 4003d 7 2a 29 50081 7 2b 25 2a 50041 11 2c 1d c 3003e 2c 2b
50041 11 30 2f 10 4003d 7 31 30 50041 11 32 23 c 3003e 32 31 50041 11 36 35 10
4003d 7 37 36 50041 11 38 2f c 3003e 38 37 50041 11 3c 3b 10 4003d 7 3d 3c 50041
11 41 40 10 4003d 7 42 41 50081 7 43 3d 42 50041 11 44 35 c 3003e 44 43 50041 11
48 47 10 4003d 7 49 48 50041 11 4d 4c 10 4003d 7 4e 4d 50081 7 4f 49 4e 50041 11
50 3b c 3003e 50 4f 50041 11 51 a 10 4003d 7 52 51 50041 11 53 47 c 3003e 53 52
50041 11 5b 5a 10 4003d 7 5c 5b 3003e 55 5c 50041 5f 60 5a 5d 3003e 60 5e 50041
65 66 5a c 3003e 66 64 100fd 10038

[test]
clear

# Set color_in
ssbo 3 subdata vec4 0 0.0 1.0 0.0 1.0

# Clear other values
ssbo 3 subdata vec3 16 0.0 0.0 0.0
ssbo 3 subdata uint 28 0

# Descriptor set and binding test
ssbo 0:4 subdata vec4 0 0.4 0.4 0.4 0.4
ssbo 5 subdata vec4 0 0.5 0.5 0.5 0.5
ssbo 1:3 subdata vec4 0 1.3 1.3 1.3 1.3
ssbo 1:5 subdata vec4 0 1.5 1.5 1.5 1.5
ssbo 1:6 subdata vec4 0 1.6 1.6 1.6 1.6
ssbo 2:0 subdata vec4 0 2.0 2.0 2.0 2.0
ssbo 2:3 subdata vec4 0 2.3 2.3 2.3 2.3
ssbo 2:4 subdata vec4 0 2.4 2.4 2.4 2.4
ssbo 2:7 subdata vec4 0 2.7 2.7 2.7 2.7

ssbo 0:4 subdata vec4 16 0.4 0.4 0.4 0.4
ssbo 5 subdata vec4 16 0.5 0.5 0.5 0.5
ssbo 1:3 subdata vec4 16 1.3 1.3 1.3 1.3
ssbo 1:5 subdata vec4 16 1.5 1.5 1.5 1.5
ssbo 1:6 subdata vec4 16 1.6 1.6 1.6 1.6
ssbo 2:0 subdata vec4 16 2.0 2.0 2.0 2.0
ssbo 2:3 subdata vec4 16 2.3 2.3 2.3 2.3
ssbo 2:4 subdata vec4 16 2.4 2.4 2.4 2.4
ssbo 2:7 subdata vec4 16 2.7 2.7 2.7 2.7

uniform ubo 3:2 vec4 0 0.1 0.2 0.3 0.4
uniform ubo 3:6 vec4 0 0.2 0.4 0.6 0.8
uniform ubo 3:10 vec4 0 -0.1 -0.2 -0.3 -0.4


draw rect -1 -1 2 2

# Probe the buffer to make sure that reading the SSBO worked
probe all rgba 0.0 1.0 0.0 1.0

# Probe the SSBO to check that writing worked
probe ssbo vec3 3 16 == 3 4 5
probe ssbo uint 3 28 < 4
probe ssbo uint 3 28 == 3

# Descriptor set and binding test
#
# Note that floating point values might not be exactly same
# and we allow small errors i.e., 0.000001
#
probe ssbo vec4 4   16 >  0.499999 0.499999 0.499999 0.499999
probe ssbo vec4 4   16 <  0.500001 0.500001 0.500001 0.500001
probe ssbo vec4 0:5 16 >  1.299999 1.299999 1.299999 1.299999
probe ssbo vec4 0:5 16 <  1.300001 1.300001 1.300001 1.300001
probe ssbo vec4 1:3 16 >  1.599999 1.699999 1.799999 1.899999
probe ssbo vec4 1:3 16 <  1.600001 1.700001 1.800001 1.900001
probe ssbo vec4 1:5 16 >  1.599999 1.599999 1.599999 1.599999
probe ssbo vec4 1:5 16 <  1.600001 1.600001 1.600001 1.600001
probe ssbo vec4 1:6 16 >  1.999999 1.999999 1.999999 1.999999
probe ssbo vec4 1:6 16 <  2.000001 2.000001 2.000001 2.000001
probe ssbo vec4 2:0 16 >  2.499999 2.699999 2.899999 3.099999
probe ssbo vec4 2:0 16 <  2.500001 2.700001 2.900001 3.100001
probe ssbo vec4 2:3 16 >  2.299999 2.199999 2.099999 1.999999
probe ssbo vec4 2:3 16 <  2.300001 2.200001 2.100001 2.000001
probe ssbo vec4 2:4 16 >  2.699999 2.699999 2.699999 2.699999
probe ssbo vec4 2:4 16 <  2.700001 2.700001 2.700001 2.700001
probe ssbo vec4 2:7 16 >  0.399999 0.399999 0.399999 0.399999
probe ssbo vec4 2:7 16 <  0.400001 0.400001 0.400001 0.400001
)",
#endif
